---
layout: default
title: 博文
script: |
  document.addEventListener('DOMContentLoaded', () => {
    const timeline = document.querySelector('.timeline');
    const items = document.querySelectorAll('.timeline-item');
    const contentArea = document.querySelector('.content-area');

    // 滚轮控制左右滑动
    timeline.addEventListener('wheel', (e) => {
      e.preventDefault();
      timeline.scrollLeft += e.deltaY * 2;
    });

    // Dock 栏效果
    timeline.addEventListener('mousemove', (e) => {
      const rect = timeline.getBoundingClientRect();
      const mouseX = e.clientX - rect.left;

      items.forEach(item => {
        const itemRect = item.getBoundingClientRect();
        const itemCenter = itemRect.left + itemRect.width / 2 - rect.left;
        const distance = Math.abs(mouseX - itemCenter);
        const scale = Math.max(0.8, 1.5 - distance / 200); // 最大1.5倍，最小0.8倍
        item.querySelector('span').style.transform = `scale(${scale})`;
      });
    });

    // 鼠标离开时恢复默认大小
    timeline.addEventListener('mouseleave', () => {
      items.forEach(item => {
        item.querySelector('span').style.transform = 'scale(1)';
      });
    });

    // 点击显示内容
    items.forEach(item => {
      item.addEventListener('click', () => {
        const url = item.dataset.url;
        fetch(url)
          .then(response => response.text())
          .then(html => {
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            const content = doc.querySelector('.post-content').innerHTML;
            contentArea.innerHTML = `
              <h1>${item.querySelector('span').textContent}</h1>
              <div class="date">${item.querySelector('.date').textContent}</div>
              <div class="post-content">${content}</div>
            `;
            contentArea.scrollIntoView({ behavior: 'smooth' });
          });
      });
    });
  });
---
<div class="content-area"></div>
<div class="timeline-wrapper">
  <div class="timeline">
    {% for post in site.posts %}
      <div class="timeline-item" data-url="{{ post.url | relative_url }}">
        <div class="date">{{ post.date | date: "%Y-%m-%d" }}</div>
        <span>{{ post.title }}</span>
      </div>
    {% endfor %}
  </div>
</div>